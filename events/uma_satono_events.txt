#光钻事件链
namespace = uma_satono_event
country_event = {
	#剧情起始
	id = uma_satono_event.1
	title = uma_satono_event.name
	desc = uma_satono_event.desc
	mean_time_to_happen = {
		months = 36
	}
	fire_only_once = yes
	after = {
		hidden_effect = {
			country_event = {
				id = uma_satono_event.2
				days = 20
			}
		}
	}
	option = {
		name = uma_satono_event.1.a
		add_resource = {
			food = -1
		}
	}
}

country_event = {
	id = uma_satono_event.2
	title = uma_satono_event.2.name
	desc = uma_satono_event.2.desc
	is_triggered_only = yes
	after = {
		country_event = {
			id = uma_satono_event.3
			days = 20
		}
	}
	option = {
		name = uma_satono_event.2.a
		default_hide_option = yes
	}
}

country_event = {
	id = uma_satono_event.3
	title = uma_satono_event.3.name
	desc = uma_satono_event.3.desc
	is_triggered_only = yes
	after = {
		country_event = {
			id = uma_satono_event.4
		}
	}
	option = {
		name = uma_sotano_event.3.a
	}
}

country_event = {
	id = uma_satono_event.4
	title = uma_satono_event.4.name
	desc = uma_satono_event.4.desc
	is_triggered_only = yes
	option = {
		name = uma_satono_event.4.a
		add_resource = {
			influence = 150
		}
	}
	option = {
		name = uma_satono_event.4.b
		hidden_effect = {
			country_event = {
				id = uma_satono_event.5
			}
		}
	}
}

country_event = {
	id = uma_satono_event.5
	is_triggered_only = yes
	hide_window = yes
	after = {
		country_event = {
			id = uma_satono_event.6
			days = 20
		}
	}
}

country_event = {
	#剧情结束
	id = uma_satono_event.6
	title = uma_satono_event.6.name
	desc = uma_satono_event.6.desc
	is_triggered_only = yes
	option = {
		name = uma_satono_event.6.a
		add_modifier = {
			modifier = uma_diamond_cooker
			days = -1
		}
		hidden_effect = {
			country_event = {
				id = uma_satono_event.8
				id = uma_satono_event.7
			}
		}
	}
}

country_event = {
	#局势起始
	id = uma_satono_event.7
	title = uma_satono_event.7.name
	desc = uma_satono_event.7.desc
	is_triggered_only = yes
	option = {
		name = uma_satono_event.7
		start_situation = {
			type = uma_satono_diamond_food
		}
	}
}

country_event = {
	#建立外交
	id = uma_satono_event.8
	title = uma_satono_event.8.name
	desc = uma_satono_event.8.desc
	is_triggered_only = yes
	fire_only_once = yes
	hide_window = yes
	immediate = {
		every_playable_country = {
			limit = {
				has_origin = origin_uma_below_threegodness
			}
			set_global_flag = satono_spawn
			set_country_flag = has_satono
			save_global_event_target_as = satono_own_country
			create_country = {
				name = "satono_country"
				type = satono_country
				flag = {
					icon = {
						category = "domination"
						file = "domination_8.dds"
					}
					background = {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors = {
						"red"
						"red"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = satono_country
					set_global_flag = satono_no
					set_country_flag = satono_country
					establish_communications_no_message = root
				}
			}
		}
		every_playable_country = {
			limit = {
				is_ai = no
				has_authority = auth_trainingcenter
			}
		}
	}
}

country_event = {
	#光钻外交
	id = uma_satono_event.9
	title = uma_satono_event.9.name
	desc = uma_satono_event.9.desc
	diplomatic = yes
	is_triggered_only = yes
	trigger = {
		from = {
			OR = {
				is_country_type = satono_country
				is_same_value = ROOT
			}
		}
	}
	option = {
		name = uma_satono_event.9.a
		allow = {
			NOT = {
				has_country_flag = uma_satono_diamond_food
			}
		}
		country_event = {
			id = uma_satono_event.7
		}
	}
	option = {
		name = uma_satono_event.9.b
		allow = {
			AND = {
				has_country_flag = uma_satono_diamond_food
				NOT = {
					has_country_flag = uma_satono_diamond_food_buying_cd
				}
			}
		}
		random_situation = {
			limit = {
				is_situation_type = uma_satono_diamond_food
			}
			add_situation_progress = 50
		}
		add_resource = {
			energy = -1000
		}
		set_timed_country_flag = {
			flag = uma_satono_diamond_food_buying_cd
			days = 180
		}
	}
	option = {
		name = uma_satono_event.9.c
		hidden_effect = {
			country_event = {
				id = uma_satono_event.10
			}
		}
	}
	option = {
		name = uma_satono_event.9.quit
		default_hide_option = yes
	}
}

country_event = {
	#与领袖交谈
	id = uma_satono_event.10
	title = uma_satono_event.9.name
	desc = uma_satono_event.9.desc
	diplomatic = yes
	is_triggered_only = yes
	option = {
		name = uma_satono_event.10.a
		allow = {
			has_country_flag = has_seiun_sky
		}
		hidden_effect = {
			country_event = {
				id = uma_satono_event.20
			}
		}
	}
	option = {
		name = uma_satono_event.10.b
		allow = {
			has_leader_flag = uma_is_kitasan_black
		}
		hidden_effect = {
			country_event = {
				id = uma_satono_event.21
			}
		}
	}
	option = {
		name = uma_satono_event.10.c
		allow = {
			has_leader_flag = uma_is_oguri_cap
		}
		hidden_effect = {
			country_event = {
				id = uma_satono_event.22
			}
		}
	}
	option = {
		name = uma_satono_event.10.d
		hidden_effect = {
			country_event = {
				id = uma_satono_event.23
			}
		}
	}
	option = {
		name = uma_satono_event.10.e
		default_hide_option = yes
	}
}

country_event = {
	#与星云天空交流
	id = uma_satono_event.20
	title = uma_satono_event.20.name
	desc = uma_satono_event.20.desc
	is_triggered_only = yes
	diplomatic = yes
	immediate = {
		every_owned_leader = {
			if = {
				limit = {
					has_leader_flag = uma_is_seiun_sky
				}
				save_event_target_as = select_leader_0
			}
		}
	}
	option = {
		name = uma_satono_event.20.a
		trigger = {
			exists = event_target:select_leader_0
		}
		event_target:select_leader_0 = {
			add_trait = uma_admiral_trait_sp_kitasan_black
			#先用北黑特质来做结果
		}
	}
}

country_event = {
	id = uma_satono_event.21
	#与北黑交流
	title = uma_satono_event.21.name
	desc = uma_satono_event.21.desc
	is_triggered_only = yes
	diplomatic = yes
	immediate = {
		every_owned_leader = {
			if = {
				limit = {
					has_leader_flag = uma_is_kitasan_black
				}
			}
		}
		save_event_target_as = select_leader_1
	}
	option = {
		name = uma_satono_event.21.a
		trigger = {
			exists = event_target:select_leader_1
		}
	}
}

country_event = {
	#与小栗帽交谈
	id = uma_satono_event.22
	title = uma_satono_event.22.name
	desc = uma_satono_event.22.desc
	is_triggered_only = yes
	diplomatic = yes
	immediate = {
		every_owned_leader = {
			if = {
				limit = {
					has_leader_flag = uma_is_oguri_cap
				}
			}
		}
		save_event_target_as = select_leader_5
	}
	option = {
		name = uma_satono_event.22.a
		trigger = {
			exists = event_target:select_leader_5
		}
	}
}

country_event = {
	#与学生会长交流
	id = uma_satono_event.23
	title = uma_satono_event.23.name
	desc = uma_satono_event.23.desc
	is_triggered_only = yes
	diplomatic = yes
	immediate = {
		every_owned_leader = {
			if = {
				limit = {
					leader_class = ruler
				}
			}
		}
		save_event_target_as = select_leader_6
	}
	option = {
		name = uma_satono_event.23.a
		trigger = {
			exists = event_target:select_leader_6
		}
		event_target:select_leader_6 = {
			add_trait = uma_admiral_trait_sp_kitasan_black
		}
	}
}

planet_event = {
	#殖民星球+食材
	id = uma_satono_event.200
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = this
	}
	immediate = {
		owner = {
			random_situation = {
				limit = {
					is_situation_type = uma_satono_diamond_food
				}
				add_situation_progress = 30
			}
		}
	}
}

country_event = {
	#探索星系+食材
	id = uma_satono_event.201
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = this
	}
	immediate = {
		random_situation = {
			limit = {
				is_situation_type = uma_satono_diamond_food
			}
			add_situation_progress = 15
		}
	}
}

