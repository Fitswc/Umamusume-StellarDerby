namespace = uma_bour_arc

#导！
event = {
	id = uma_bour_arc.9
    hide_window = yes
    is_triggered_only = yes
    fire_only_once = yes

	immediate = {
		random_country = {
			limit = { is_country_type = global_event }
			country_event = {
				id = uma_bour_arc.0
			}
		}
	}

}

#创建船专用的敌对国家
country_event = {
	id = uma_bour_arc.0
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = uma_has_created_bourbon_country
		}
	}

	immediate = {
		set_global_flag = uma_has_created_bourbon_country
		create_country = {
			name = "uma_bour_arc_acient_defender"
			type = uma_bourbon_arc_country
			ignore_initial_colony_error = yes
			authority = random
			flag = random
			name_list = random #?
			origin = origin_default
			effect = {
				save_global_event_target_as = uma_bourbon_arc_fleet_country
			}

		}
	}

}

#创建船（30K（我感觉会有300K））
planet_event = {
	id = uma_bour_arc.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_fleet = {
			name = "uma_bour_arc_acient_defender" #远古智械守卫者
			effect = {
				set_owner = event_target:uma_bourbon_arc_fleet_country
				while = {
					count = 20
					create_ship = {
						name = random
						design = NAME_Warder_of_the_Ruins
						upgradable = no
					}
				}
				set_location = {
					target = event_target:uma_bourbon_arc_anomaly_here
					distance = 5
					angle = random
				}
			}
		}
	}
}

ship_event = {
	id = uma_bour_arc.2
	title = uma_bour_arc.2.title
	desc = uma_bour_arc.2.desc
#	picture =
	is_triggered_only = yes
	location = from
#from = planet
	option = {
		name = uma_bour_arc.2.a #Alright,What we can do is only wait here
		#这里是要用from吗?
		root = {
			save_event_target_as = uma_bou_ship
			ship_event = {
				id = uma_bour_arc.3
				days = 10
				random = 2
			}
		}
	}
}

ship_event = {
	id = uma_bour_arc.3
	title = uma_bour_arc.3.title
	desc = uma_bour_arc.3.desc
	is_triggered_only = yes
	location = event_target:uma_bou_ship

	option = {
		name = uma_bour_arc.3.a #wait
		hidden_effect = {
			ship_event = {
				id = uma_bour_arc.4
				days = 30
				random = 5
			}
		}
	}
	option = {
		name = uma_bour_arc.3.b #found
		owner = {
			hidden_effect = {
				set_country_flag = uma_bou_arc_b
			}
			add_resource = {
				energy = 400
			}
		}
		hidden_effect = {
			ship_event = {
				id = uma_bour_arc.4
				days = 30
				random = 5
			}
		}
	}
	option = {
		name = uma_bour_arc.3.c #Destroy them!
		owner = {
			set_country_flag = uma_bou_arc_c
		}
		hidden_effect = {
			ship_event = {
				id = uma_bour_arc.4
				days = 30
				random = 5
			}
		}
	}
}

#1
ship_event = {
	id = uma_bour_arc.4
	title = uma_bour_arc.4.title
	desc = uma_bour_arc.4.desc
	is_triggered_only = yes
	location = event_target:uma_bou_ship

	option = {
		name = uma_bour_arc.4.a

		event_target:uma_bourbon_arc_anomaly_here = {
			change_pc = pc_machine
			create_archaeological_site = uma_bourbon_arc
		}
	}
#
	option = {
		allow = {
			owner = {
				custom_tooltip = {
					has_country_flag = uma_bou_arc_b
					fail_text = uma_no_arc_b
				}
			}
		}
		name = uma_bour_arc.4.b

		event_target:uma_bourbon_arc_anomaly_here = {
			change_pc = pc_machine
			create_archaeological_site = uma_bourbon_arc
		}

	}
#3炸球
	option = {
		allow = {
			owner = {
				custom_tooltip = {
					has_country_flag = uma_bou_arc_c
					fail_text = uma_no_arc_c
				}
			}
		}
		name = uma_bour_arc.4.c
		owner = {
			enable_special_project = {
				name = UMA_BOU_BOOM_PLANET
				location = event_target:uma_bourbon_arc_anomaly_here
				owner = this
			}
		}
	}
}

##3后续
country_event = {
	id = uma_bour_arc.5
	title = uma_bour_arc.5.title
	desc = uma_bour_arc.5.desc

	option = {
		name = uma_bour_arc_damn
	}
}


###########Arc_site

fleet_event = {
	id = uma_bour_arc.6
	title = uma_bour_arc.6.title
	desc = uma_bour_arc.6.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.6.a
		small_artifact_reward = yes
	}
}

fleet_event = {
	id = uma_bour_arc.7
	title = uma_bour_arc.7.title
	desc = uma_bour_arc.7.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.7.a
		small_artifact_reward = yes
	}
}

fleet_event = {
	id = uma_bour_arc.8
	title = uma_bour_arc.8.title
	desc = uma_bour_arc.8.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.8.a
		small_artifact_reward = yes
		#感觉回不太好？
		owner = {
			add_tech_progress = {
				tech = tech_psionic_theory
				progress = 0.1
			}

#			add_modifier = {
#				modifier =
#			}
		}
	}
}

fleet_event = {
	id = uma_bour_arc.9
	title = uma_bour_arc.9.title
	desc = uma_bour_arc.9.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.9.a
		small_artifact_reward = yes
		#好多buff！
#		owner = {
#			add_modifier = {
#				modifier =
#			}
#		}
	}
}

fleet_event = {
	id = uma_bour_arc.10
	title = uma_bour_arc.10.title
	desc = uma_bour_arc.10.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = {
			set_site_progress_locked = yes
			save_global_event_target_as = uma_bourbon_arc_site
		}
	}

	after = {
#		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.10.a
		owner = {
			enable_special_project = {
				name = UMA_BOU_DECODE
				owner = this
				location = event_target:uma_bourbon_arc_anomaly_here
			}
		}

	}
	option = {
		name = uma_bour_arc.10.b
		owner = {
			enable_special_project = {
				name = UMA_BOU_DECODE_WHOLE_COUNTRY
				owner = this
				location = event_target:uma_bourbon_arc_anomaly_here
			}
		}
	}
	option = {
		name = uma_bour_arc.10.c
		save_global_event_target_as = uma_bourbon_this_is_fleet
		enable_special_project = {
			name = UMA_BOU_BOOM_PLANET_ARC
			owner = owner
			location = event_target:uma_bourbon_arc_anomaly_here
		}
	}
}

fleet_event = {
	id = uma_bour_arc.11
	title = uma_bour_arc.11.title
	desc = uma_bour_arc.11.desc
	picture = GFX_evt_discovered_hidden_door  #快速占位图
	show_sound = archeology_log_entry_positive
	location = from
	archaeology = yes
	is_triggered_only = yes

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = uma_bour_arc.11.a
		large_artifact_reward = yes
		enable_special_project = {
			name = UMA_BOU_ANALYSE
			owner = owner
			location = event_target:uma_bourbon_arc_anomaly_here
		}
	}
}



##后续

country_event = {
	id = uma_bour_arc.12
	title = uma_bour_arc.12.title
	desc = uma_bour_arc.12.desc
	is_triggered_only = yes

	option = {
		name = uma_bour_arc.12.a
	}
}













